!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).myAwsesomeCharts={},t.d3)}(this,(function(t,e){"use strict";function r(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var n=r(e),i={name:"Rectpacker",thumbnail:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg id='Layer_1' data-name='Layer 1' xmlns='http://www.w3.org/2000/svg' width='320' height='160' viewBox='0 0 320 160'%3e %3cdefs%3e %3cstyle%3e .cls-1%2c .cls-2%2c .cls-3%2c .cls-4%2c .cls-5 %7b fill: white%3b %7d .cls-6 %7b fill: %234ba0b1%3b %7d .cls-6%2c .cls-7%2c .cls-8%2c .cls-9%2c .cls-10%2c .cls-11%2c .cls-12%2c .cls-13 %7b stroke: white%3b %7d .cls-7 %7b fill: %235e4fa2%3b %7d .cls-8 %7b fill: %23e1524a%3b %7d .cls-9 %7b fill: %23a0d9a3%3b %7d .cls-10 %7b fill: %239e0142%3b %7d .cls-2 %7b stroke: %235e4fa2%3b %7d .cls-11 %7b fill: %23fba35e%3b %7d .cls-12 %7b fill: %23ebf7a6%3b %7d .cls-3 %7b stroke: %23fba35e%3b %7d .cls-13 %7b fill: %23fee89a%3b %7d .cls-4 %7b stroke: %23ebf7a6%3b %7d .cls-5 %7b stroke: %23e1524a%3b %7d .cls-14 %7b font-family: Helvetica%2c Helvetica%3b font-size: 10px%3b isolation: isolate%3b %7d .cls-15 %7b fill: none%3b stroke: black%3b %7d %3c/style%3e %3c/defs%3e %3crect id='backgorund' class='cls-1' y='0' width='320' height='160'/%3e %3cg id='axis'%3e %3cg transform='translate(0%2c143)'%3e %3cpath class='cls-15' d='M20.5%2c150v-5.5H319.5v5.5'/%3e %3cg transform='translate(0.5%2c0)'%3e %3cline class='cls-15' x1='20.5' y1='144' x2='20.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(17.71924 160.09998)'%3e%3ctspan x='0' y='0'%3e0%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(30.5%2c0)'%3e %3cline class='cls-15' x1='50.5' y1='144' x2='50.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(44.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e10%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(60.5%2c0)'%3e %3cline class='cls-15' x1='80.5' y1='144' x2='80.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(74.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e20%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(90.5%2c0)'%3e %3cline class='cls-15' x1='110.5' y1='144' x2='110.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(104.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e30%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(120.5%2c0)'%3e %3cline class='cls-15' x1='140.5' y1='144' x2='140.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(134.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e40%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(150.5%2c0)'%3e %3cline class='cls-15' x1='170.5' y1='144' x2='170.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(164.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e50%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(179.5%2c0)'%3e %3cline class='cls-15' x1='199.5' y1='144' x2='199.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(193.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e60%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(209.5%2c0)'%3e %3cline class='cls-15' x1='229.5' y1='144' x2='229.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(223.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e70%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(239.5%2c0)'%3e %3cline class='cls-15' x1='259.5' y1='144' x2='259.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(253.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e80%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(269.5%2c0)'%3e %3cline class='cls-15' x1='289.5' y1='144' x2='289.5' y2='150'/%3e %3ctext class='cls-14' transform='translate(283.93848 160.09998)'%3e%3ctspan x='0' y='0'%3e90%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(299.5%2c0)'%3e %3cline class='cls-15' x1='319.5' y1='144' x2='319.5' y2='150'/%3e %3c/g%3e %3c/g%3e %3cg%3e %3cpath class='cls-15' d='M14%2c144.5h6.5V1.5h-6.5'/%3e %3cg transform='translate(0%2c143.5)'%3e %3cline class='cls-15' x1='20' y1='144.5' x2='14' y2='144.5'/%3e %3ctext class='cls-14' transform='translate(5.43848 147.70001)'%3e%3ctspan x='0' y='0'%3e0%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c127.5)'%3e %3cline class='cls-15' x1='20' y1='128.5' x2='14' y2='128.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 131.70001)'%3e%3ctspan x='0' y='0'%3e10%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c111.5)'%3e %3cline class='cls-15' x1='20' y1='112.5' x2='14' y2='112.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 115.70001)'%3e%3ctspan x='0' y='0'%3e20%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c95.5)'%3e %3cline class='cls-15' x1='20' y1='96.5' x2='14' y2='96.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 99.70001)'%3e%3ctspan x='0' y='0'%3e30%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c79.5)'%3e %3cline class='cls-15' x1='20' y1='80.5' x2='14' y2='80.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 83.70001)'%3e%3ctspan x='0' y='0'%3e40%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c64.5)'%3e %3cline class='cls-15' x1='20' y1='65.5' x2='14' y2='65.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 68.70001)'%3e%3ctspan x='0' y='0'%3e50%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c48.5)'%3e %3cline class='cls-15' x1='20' y1='49.5' x2='14' y2='49.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 52.70001)'%3e%3ctspan x='0' y='0'%3e60%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c32.5)'%3e %3cline class='cls-15' x1='20' y1='33.5' x2='14' y2='33.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 36.70001)'%3e%3ctspan x='0' y='0'%3e70%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c16.5)'%3e %3cline class='cls-15' x1='20' y1='17.5' x2='14' y2='17.5'/%3e %3ctext class='cls-14' transform='translate(-.12305 20.70001)'%3e%3ctspan x='0' y='0'%3e80%3c/tspan%3e%3c/text%3e %3c/g%3e %3cg transform='translate(0%2c0.5)'%3e %3cline class='cls-15' x1='20' y1='1.5' x2='14' y2='1.5'/%3e %3c/g%3e %3c/g%3e %3c/g%3e %3ccircle class='cls-4' cx='50.5' cy='112.5' r='16'/%3e %3crect class='cls-3' x='80.73422' y='46.56216' width='33.97457' height='33.97457' transform='translate(73.55821 -50.48633) rotate(45)'/%3e %3cpolygon class='cls-5' points='177.50362 104.72659 202.24373 86.75185 192.79385 57.66811 162.2134 57.66811 152.76351 86.75185 177.50362 104.72659'/%3e %3cpolygon class='cls-2' points='282.9192 52.32274 295.18872 69.08321 274.53897 66.83773 266.15873 85.84368 257.77849 66.83773 237.12874 69.08321 249.39826 52.32274 237.12874 35.56227 257.77849 37.80775 266.15873 18.8018 274.53897 37.80775 295.18872 35.56227 282.9192 52.32274'/%3e %3crect class='cls-12' x='22.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-13' x='38.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-11' x='54.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-8' x='70.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-10' x='86.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-7' x='102.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-6' x='118.5' y='1.5' width='16' height='16'/%3e %3crect class='cls-9' x='134.5' y='1.5' width='16' height='16'/%3e%3c/svg%3e",icon:"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg id='rawgraphs-icons' xmlns='http://www.w3.org/2000/svg' width='56' height='56' viewBox='0 0 56 56'%3e %3cdefs%3e %3cstyle%3e .cls-1 %7b fill: %2306c26c%3b %7d .cls-2 %7b fill: %2395e5c0%3b %7d %3c/style%3e %3c/defs%3e %3cg id='secundary'/%3e %3cg id='primary'%3e %3cpolygon class='cls-1' points='46.30469 46.80469 44.86523 46.80469 46.06122 48 8 48 8 9.93878 9.19531 11.13477 9.19531 9.69531 7.5 8 5.80469 9.69531 5.80469 11.13477 7 9.93878 7 49 46.06122 49 44.86523 50.19531 46.30469 50.19531 48 48.5 46.30469 46.80469'/%3e %3c/g%3e %3cpath class='cls-2' d='M24.51171%2c20.96213c.92544-.98469%2c2.19511-1.47703%2c3.81004-1.47703%2c1.49439%2c0%2c2.69052%2c.42084%2c3.58838%2c1.26354%2c.89888%2c.8427%2c1.34832%2c1.91932%2c1.34832%2c3.22985%2c0%2c.79469-.16343%2c1.43821-.48928%2c1.9326s-.99286%2c1.22064-2.00308%2c2.17979c-.73443%2c.69663-1.21145%2c1.28602-1.43311%2c1.76917s-.333%2c1.19715-.333%2c2.13995h-2.00001c0-1.07049%2c.12768-1.93362%2c.38203-2.5894%2c.25536-.65475%2c.82125-1.40553%2c1.69971-2.25231l.91727-.88765c.27477-.25434%2c.49847-.51992%2c.66905-.79776%2c.31154-.48621%2c.46681-.99184%2c.46681-1.51687%2c0-.73341-.2237-1.36978-.6711-1.9091s-1.18693-.80899-2.21963-.80899c-1.27682%2c0-2.16038%2c.46374-2.64966%2c1.39327-.27477%2c.51584-.43208%2c1.2615-.46987%2c2.23495h-2.00001c0-1.61799%2c.4617-2.91831%2c1.38714-3.90401Zm2.44333%2c12.90306h2.23597v2.3371h-2.23597v-2.3371Z'/%3e%3c/svg%3e",id:"customrawcharts.hello",categories:["hack3r"],description:"A rectangle packing algorithm that keeps the aspect ratio of the rectangles.",code:"https://rawgraphs.io",tutorial:"https://rawgraphs.io"};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e,r){return h=f()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&u(i,r.prototype),i},h.apply(null,arguments)}function p(t){var e="function"==typeof Map?new Map:void 0;return p=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)},p(t)}function y(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,s=[],c=!0,a=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);c=!0);}catch(t){a=!0,i=t}finally{try{c||null==r.return||r.return()}finally{if(a)throw i}}return s}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=d(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){a=!0,s=t},f:function(){try{c||null==r.return||r.return()}finally{if(a)throw s}}}}function b(t,r){if("object"==s(t)){for(var n in t)i(this,n,t[n]);return this}return"function"==typeof t?this.each(o(t)):1==arguments.length?this.style(t):i(this,t,r);function i(t,e,r){e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();return~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width margin-top margin-left margin-bottom margin-right font-size width stroke-width line-height margin padding border border-radius max-width min-width max-height min-height".indexOf(e)?t.style(e,"function"==typeof r?a(r):c(r)):t.style(e,r),t}function c(t){return t.match?t:t+"px"}function a(t){return function(){var e=t.apply(this,arguments);return c(e)}}function o(t){return function(){var r=t.apply(this,arguments);for(var n in r)i(e.select(this),n,r[n])}}}function w(t,e,r,n,i){for(var s=i+1;n<=i;){var c=n+i>>>1,a=t[c];(void 0!==r?r(a,e):a-e)>=0?(s=c,i=c-1):n=c+1}return s}function P(t,e,r,n,i,s){return"function"==typeof r?s(t,e,r,void 0===n?0:0|n,void 0===i?t.length-1:0|i):s(t,e,void 0,void 0===r?0:0|r,void 0===n?t.length-1:0|n)}e.selection.prototype.styles=b,e.transition.prototype.styles=b;var k=function(t,e,r,n,i){return P(t,e,r,n,i,w)};function j(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}var A=j.prototype;function M(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function S(t,e){var r=F(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function O(t,e){var r=t.intervals([]);r.push(e),S(t,r)}function I(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?0:(r.splice(n,1),S(t,r),1)}function q(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function _(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function z(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function C(t,e){return t-e}function T(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function E(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function F(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(C);var n=e[e.length>>1],i=[],s=[],c=[];for(r=0;r<t.length;++r){var a=t[r];a[1]<n?i.push(a):n<a[0]?s.push(a):c.push(a)}var o=c,l=c.slice();return o.sort(T),l.sort(E),new j(n,F(i),F(s),o,l)}A.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},A.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?O(this,t):this.left.insert(t):this.left=F([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?O(this,t):this.right.insert(t):this.right=F([t]);else{var r=k(this.leftPoints,t,T),n=k(this.rightPoints,t,E);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},A.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?I(this,t):2===(s=this.left.remove(t))?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?I(this,t):2===(s=this.right.remove(t))?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var i=this.left,s=this.right;r.count-=n.count,r.right=n.left,n.left=i,n.right=s}M(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?M(this,this.left):M(this,this.right);return 1}for(i=k(this.leftPoints,t,T);i<this.leftPoints.length&&this.leftPoints[i][0]===t[0];++i)if(this.leftPoints[i]===t){this.count-=1,this.leftPoints.splice(i,1);for(s=k(this.rightPoints,t,E);s<this.rightPoints.length&&this.rightPoints[s][1]===t[1];++s)if(this.rightPoints[s]===t)return this.rightPoints.splice(s,1),1}return 0},A.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return q(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return _(this.rightPoints,t,e)}return z(this.leftPoints,e)},A.queryInterval=function(t,e,r){var n;if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r)))return n;if(e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r)))return n;return e<this.mid?q(this.leftPoints,e,r):t>this.mid?_(this.rightPoints,t,r):z(this.leftPoints,r)};var R=function(t){this.root=t}.prototype;function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[10,10],r=g(t,2),n=r[0],i=r[1],s=g(e,2),c=s[0],a=s[1];return new V(new B(1,[n,i]),new B(-1,[n+c,i]),new B(-1,[n,i+a]),new B(1,[n+c,i+a]))}function N(t,e){return e<0?function(t,e){if(t.length<4)return new V;var r,n=function(t){var e,r=[Number.MAX_VALUE,Number.MAX_VALUE],n=[Number.MIN_VALUE,Number.MIN_VALUE],i=x(t);try{for(i.s();!(e=i.n()).done;)for(var s=e.value,c=0,a=[0,1];c<a.length;c++){var o=a[c];s.p[o]<r[o]&&(r[o]=s.p[o]),s.p[o]>n[o]&&(n[o]=s.p[o])}}catch(t){i.e(t)}finally{i.f()}return{min:r,max:n}}(t),i=n.min,s=n.max,c=x(t);try{for(c.s();!(r=c.n()).done;)for(var a=r.value,o=0,l=[0,1];o<l.length;o++){var u=l[o];a.p[u]<i[u]&&(i[u]=a.p[u]),a.p[u]>s[u]&&(s[u]=a.p[u])}}catch(t){c.e(t)}finally{c.f()}var f=10,h=L([i[0]-f,i[1]-f],[s[0]-i[0]+f+f,s[1]-i[1]+f+f]),p=new V;p.push(h[0],h[1]);var y,g=x(t);try{for(g.s();!(y=g.n()).done;){var v=y.value;p.push(v.scale(-1))}}catch(t){g.e(t)}finally{g.f()}p.push(h[2],h[3]);var d=U(p,e);return d.slice(2,d.length-2).map((function(t){return t.w=-t.w,t}))}(t,-e):U(t,e)}function U(t,e){var r,n=[],i=x(t.rectangles());try{var s=function(){var t=r.value;[[-e,-e],[e,-e],[-e,e],[e,e]].forEach((function(e,r){var i=g(e,2),s=i[0],c=i[1];t[r].p[0]+=s,t[r].p[1]+=c,n.push(t[r])}))};for(i.s();!(r=i.n()).done;)s()}catch(t){i.e(t)}finally{i.f()}return function(t){if(t.length<2)return t;for(var e=new V,r=t[0],n=1;n<t.length;n++){var i=t[n];0==r.cmp(i)?r.w+=i.w:(0!=r.w&&e.push(r),r=i)}0!=r.w&&e.push(r);return e}(h(V,n)).transform((function(t){return+(t>0)}))}R.insert=function(t){this.root?this.root.insert(t):this.root=new j(t[0],null,null,[t],[t])},R.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},R.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},R.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(R,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(R,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,r,n=(e=i,r=f(),function(){var t,n=l(e);if(r){var i=l(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return y(this,t)});function i(){var t;c(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(t=n.call.apply(n,[this].concat(r))).sort((function(t,e){return t.cmp(e)})),t}return o(i,[{key:"clone",value:function(){var t,e=new i,r=x(this);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.clone())}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"rotAxesClock",value:function(){var t,e=[],r=x(this);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.clone().rotAxesClock())}}catch(t){r.e(t)}finally{r.f()}return h(i,e)}},{key:"rotAxesCounter",value:function(){var t,e=[],r=x(this);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.clone().rotAxesCounter())}}catch(t){r.e(t)}finally{r.f()}return h(i,e)}},{key:"repr",value:function(){var t,e="{",r=x(this);try{for(r.s();!(t=r.n()).done;){e+=t.value.repr()}}catch(t){r.e(t)}finally{r.f()}return e+"}"}},{key:"prefixLen",value:function(){if(0==this.length)return 0;var t,e=this[0].lastCoord,r=0,n=x(this);try{for(n.s();!(t=n.n()).done;){if(t.value.lastCoord!=e)return r;r++}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"prefix",value:function(){var t=this.prefixLen();return this.slice(0,t)}},{key:"remainder",value:function(){var t=this.prefixLen();return this.slice(t)}},{key:"split",value:function(){var t=this.prefixLen();return[this.slice(0,t),this.slice(t)]}},{key:"project",value:function(){var t,e=new i,r=x(this);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.project())}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"unproject",value:function(t){var e,r=new i,n=x(this);try{for(n.s();!(e=n.n()).done;){var s=e.value;r.push(s.unproject(t))}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"add",value:function(t){console.assert(t instanceof i);for(var e=new i,r=0,n=0;r<this.length&&n<t.length;){var s=this[r].cmp(t[n]);if(s<0)e.push(this[r++]);else if(s>0)e.push(t[n++]);else{var c=new B(this[r].w+t[n].w,this[r].p);0!=c.w&&e.push(c),r++,n++}}for(;r<this.length;)e.push(this[r++]);for(;n<t.length;)e.push(t[n++]);return e}},{key:"scale",value:function(t){var e,r=new i,n=x(this);try{for(n.s();!(e=n.n()).done;){var s=e.value;r.push(s.scale(t))}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"value",value:function(t){console.assert(0==this.length||this[0].dim==t.length);var e,r=0,n=x(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.dominates(t)&&(r+=i.w)}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"transform",value:function(t){if(0==this.length)return new i;if(0==this[0].dim){var e=t(this[0].w);return 0!=e?new i(new B(e,[])):new i}for(var r,n=new i,s=new i,c=new i,a=h(i,v(this));a.length>0;){var o=g(a.split(),2);r=o[0],a=o[1];var l,u=r[0].lastCoord,f=r.project(),p=(s=s.add(f)).transform(t),y=x(p.add(c.scale(-1)).unproject(u));try{for(y.s();!(l=y.n()).done;){var d=l.value;n.push(d)}}catch(t){y.e(t)}finally{y.f()}c=p}return n}},{key:"rectangles",value:function(){var t=[];if(0==this.length)return t;if(console.assert(this[0].dim>0),1==this[0].dim){var e,r=0,n=Number.MINUS_INFINITY,s=x(this);try{for(s.s();!(e=s.n()).done;){var c=e.value;0!=r&&t.push(new i(new B(r,[n]),new B(-r,[c.p[0]]))),r+=c.w,n=c.p[0]}}catch(t){s.e(t)}finally{s.f()}}else for(var a,o=h(i,v(this)),l=new i,u=new i;o.length>0;){var f=g(o.split(),2);l=f[0],o=f[1];var p,y=l[0].lastCoord,d=u.project(),m=x(d.rectangles());try{for(m.s();!(p=m.n()).done;){var b,w=p.value,P=w.unproject(a),k=x(w);try{for(k.s();!(b=k.n()).done;){var j=b.value.unproject(y);j.w=-j.w,P.push(j)}}catch(t){k.e(t)}finally{k.f()}t.push(P)}}catch(t){m.e(t)}finally{m.f()}a=y,u=d.unproject(y).add(l)}return t}},{key:"faces",value:function(){var t=[];if(0==this.length)return t;console.assert(this[0].dim>1);for(var e=h(i,v(this)),r=new i;e.length>0;){var n=g(e.split(),2);r=n[0],e=n[1];var s,c=r[0].lastCoord,a=x(r.project().rectangles());try{for(a.s();!(s=a.n()).done;){var o=s.value;t.push(o.unproject(c))}}catch(t){a.e(t)}finally{a.f()}}return t}},{key:"translate",value:function(t){var e,r=x(this);try{for(r.s();!(e=r.n()).done;){e.value.translate(t)}}catch(t){r.e(t)}finally{r.f()}return this}}]),i}(p(Array)),B=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c(this,t),this.w=e,this.p=r.slice()}return o(t,[{key:"clone",value:function(){return new t(this.w,this.p)}},{key:"dim",get:function(){return this.p.length}},{key:"rotAxesClock",value:function(){return this.p.unshift(this.p.pop()),this}},{key:"rotAxesCounter",value:function(){return this.p.push(this.p.shift()),this}},{key:"lastCoord",get:function(){return this.p[this.p.length-1]}},{key:"cmp",value:function(t){this.dim!=t.dim&&console.assert(this.dim==t.dim);for(var e=this.p.length-1;e>=0;e--){if(this.p[e]<t.p[e])return-1;if(this.p[e]>t.p[e])return 1}return 0}},{key:"scale",value:function(e){return console.assert(0!=e),new t(this.w*e,this.p)}},{key:"project",value:function(){return new t(this.w,this.p.slice(0,this.p.length-1))}},{key:"unproject",value:function(e){return new t(this.w,this.p.concat([e]))}},{key:"dominates",value:function(t){for(var e=0;e<this.p.length;e++)if(t[e]<this.p[e])return!1;return!0}},{key:"translate",value:function(t){for(var e=0;e<this.p.length;e++)this.p[e]+=t[e];return this}},{key:"repr",value:function(){return"("+this.w+",["+this.p+"])"}}]),t}(),H=function(){function t(e){c(this,t),this.rects=e.rectangles(),this.it=F(this.rects.map((function(t){var e=[t[0].p[1],t[3].p[1]];return e.rect=t,e})))}return o(t,[{key:"rangeSearch",value:function(t,e){var r=[];return this.it.queryInterval(t,e,(function(t){r.push(t)})),r}},{key:"pointIntersection",value:function(t){var e,r=x(this.rangeSearch(t[1],t[1]+1));try{for(r.s();!(e=r.n()).done;){var n=e.value.rect;if(n[3].p[1]>t[1]&&n[3].p[0]>t[0]&&n[0].p[0]<=t[0])return!0}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"rectIntersection",value:function(t){var e,r,n,i=t[0].p[1],s=t[3].p[1],c=x(this.rangeSearch(i,s));try{for(c.s();!(e=c.n()).done;){var a=e.value.rect;if(r=a,n=t,Math.min(r[3].p[0],n[3].p[0])>Math.max(r[0].p[0],n[0].p[0])&&Math.min(r[3].p[1],n[3].p[1])>Math.max(r[0].p[1],n[0].p[1]))return!0}}catch(t){c.e(t)}finally{c.f()}return!1}}]),t}(),D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{metric:"euclidean",heuristic:"best",closeFactor:.1,closeFreq:1};c(this,t),this.center=e,this.rects=[],this.polygon=new V,Object.assign(this,r),this.distance="chessboard"==this.metric?function(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]))}:"euclidean"==this.metric?function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}:function(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])}}return o(t,[{key:"closePolygon",value:function(t){this.polygon=N(N(this.polygon,t),-t)}},{key:"addRect",value:function(t,e,r){var n,i,s=this,c=g(this.center,2),a=c[0],o=c[1],l=Math.sqrt(t*e),u=t/l,f=l/2,h=u/2,p=Math.sqrt(f*f+h*h),y=void 0;if(0==this.rects.length)y=L([a-f,o-h],[l,u]);else{var d=Number.MAX_VALUE,m=v(this.polygon).map((function(t){return t.dist=s.distance(t.p,s.center),t}));m.sort((function(t,e){return t.dist-e.dist}));var b,w=new H(this.polygon),P=x(m);try{for(P.s();!(b=P.n()).done;){var k=b.value,j=g(k.p,2),A=j[0],M=j[1];if(!(k.dist>d+p)){for(var S=0,O=[[A,M,-1],[A-l,M,1],[A,M-u,1],[A-l,M-u,-1]];S<O.length;S++){var I=g(O[S],3),q=I[0],_=I[1],z=I[2];if(Math.sign(k.w)==z){var C=L([q,_],[l,u]),T=q+f,E=_+h;if(!w.pointIntersection([T,E])&&!w.rectIntersection(C)){var F=this.distance([T,E],[a,o]);(!y||F<d)&&(y=C,d=F)}}}if("first"==this.heuristic&&y)break}}}catch(t){P.e(t)}finally{P.f()}}if(null==y)throw"Something went wrong : could not find a place for rect";this.rects.push([y,r]),this.polygon=(n=this.polygon,i=y,n.add(i).transform((function(t){return+(t>0)})));var R=p*this.closeFactor;this.rects.length%1==0&&this.closePolygon(R)}}]),t}();var X={metadata:i,dimensions:[{id:"name",name:"Name",validTypes:["string"],required:!0,operation:"get"},{id:"imagePath",name:"Image Path",validTypes:["string"],required:!0,operation:"get"},{id:"aspectRatio",name:"Aspect Ratio",validTypes:["number"],required:!0},{id:"size",name:"Size",validTypes:["number"],required:!0}],mapData:{name:"get",imagePath:"get",aspectRatio:"get",size:"get"},render:function(t,e,r,i,s,c){var a=r.width,o=r.height,l=r.heuristic,u=r.metric,f=r.closeFactor,h=r.minSize,p=r.maxSize,y={heuristic:l,metric:u,closeFactor:f,renderFreq:10,closeFreq:1},g=n.min(e,(function(t){return+t.size})),v=n.max(e,(function(t){return+t.size})),d=function(t,e,r,n){var i,s=new D([e/2,r/2],n),c=x(t);try{for(c.s();!(i=c.n()).done;){var a=i.value;s.addRect(a[0],a[1],a[2])}}catch(t){c.e(t)}finally{c.f()}return s}(e.map((function(t){return[(e=+t.size,r=g,n=v,i=h,s=p,(e-r)/(n-r)*(s-i)+i),t.aspectRatio,t.imagePath];var e,r,n,i,s})).sort((function(t,e){return e[0]-t[0]})).slice(0,100),a,o,y);n.select(t).selectAll("image").data(d.rects).enter().append("image").attr("x",(function(t){return t[0][0].p[0]})).attr("y",(function(t){return t[0][0].p[1]})).attr("width",(function(t){return t[0][1].p[0]-t[0][0].p[0]})).attr("height",(function(t){return t[0][3].p[1]-t[0][0].p[1]})).attr("xlink:href",(function(t){return t[1]}))},visualOptions:{heuristic:{type:"text",label:"Heuristic",group:"chart",options:["first","best"],default:"first"},metric:{type:"text",label:"Metric",group:"chart",options:["euclidean","chessboard","manhattan"],default:"euclidean"},closeFactor:{type:"number",label:"Close Factor",group:"chart",default:.3,step:.1,min:0,max:1},minSize:{type:"number",label:"Minimum Size",group:"chart",default:100,step:1,min:0,max:1e4},maxSize:{type:"number",label:"Maximum Size",group:"chart",default:1e4,step:1,min:0,max:1e4}},styles:{coolText:{fontFamily:"Arial, sans-serif",fontSize:"25px",fontWeight:"bold"}}};t.rectpacker=X,Object.defineProperty(t,"__esModule",{value:!0})}));
